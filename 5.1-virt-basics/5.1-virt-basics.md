
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ
```
Полная виртуализация подразумевает работу гипервизора на аппаратном уровне т.к. гипервизор сам является ОС. В этом случае гостевые ОС могут быть любыми, если они поддерживаются аппаратной частью. Также гостевые ОС не знают о том, что они работают в виртуальной среде. Здесь операционная система - это гипервизор с функциями ОС.
В паравиртуализации гипервизор является надстройкой над ОС. В этом случае могут быть использованы только ОС с открытым исходным кодом, т.к. требуется модификация гостевых ОС.
В виртуализации на основе ОС запуск изолированных гостевых ОС происходит за счёт возможностей ядра хостовой ОС, поэтому гостевые ОС могут быть только с ядром идентичным ОС хостовой машины. Здесь операционная система - это полноценная ОС с функциями гипервизора.
```

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ
```
- Физические сервера (видимо подразумевается аппаратная виртуализация) для:
1. Высоконагруженная база данных, чувствительная к отказу
2. Системы, выполняющие высокопроизводительные расчеты на GPU
Почему: аппратные средства доступны виртуальным машинам напрямую без прослойки в виде ОС.

- Паравиртуализация для различных web-приложений.
Почему: каждая ВМ работает как отдельный процесс на хостовой машине и в случае проблем с одним из сервисов можно более-менее просто локализовать проблему и решить её.

- Виртуализация уровня ОС для Windows системы для использования бухгалтерским отделом.
Почему: одна ОС для всех приложений, поэтому можно использовать Windows Server и разворачивать ВМ с только с Windows под приложения бухгалтеров.
```

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Ответ
```
1. Аппаратная виртуализация на базе Microsoft Hyper-V Server из-за преобладания машина на Windows и имеет весь необходимый функционал: балансировщик нагрузки, репликация, live-миграция.
2. KVM, т.к. это бесплатное open source решение с производительностью близкой к производительности физического сервера и возможностью запускать любые ОС в качестве гостевых. 
3. Xen PV: бесплатный, совместим с Windows, высокая производительность и стабильность.
4. KVM: нативный для большиства ядер Linux, из-за чего производительность близкая к нативной (полезно при тестировании, чтобы понимать реальную загрузку CPU/RAM/HDD при тестировании софта), поддержка установки из ISO образов, полезно для проведения тестирования - быстро развернул дистрибутив, потрестировал, удалил ВМ.
```

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Ответ
```
Как мне видится, недостатки в том, что нужно инженер должен уметь работать с разными гипервизорами, знать нюансы и тонкие места разных гипервизоров, что может быть затруднительно. Также серьёзным недостатком будет невозможность осуществления live-миграции между разными гипервизорами.
Я бы не стал создавать гетерогенную среду, а лучше бы выбрал максимально универсальное решение подходящее под большую часть задач.
Например есть два сервера с гипервизором Hyper-V и KVM. При выходе из строя машины с Hyper-V мигрировать гостевые машины в KVM будет невозможно и придётся поднимать все ВМ и сервисы с нуля + возможны проблемы с драйверами и совместимостью приложений.
```
